<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Billy Bob's Spin-O-Matic!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: "Trebuchet MS", system-ui, sans-serif;
      background: #F8EDE3;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      color: #2A4C7F;
    }

    .wrapper {
      max-width: 480px;
      padding: 12px 16px 16px;
    }

    .game-header {
      width: 320px;
      max-width: 100%;
      margin: 10px auto 0;
      display: block;
    }

    .wheel-container {
      position: relative;
      width: min(320px, 80vw);
      margin: -30px auto 8px;
    }

    #wheel {
      width: 100%;
      height: auto;
      display: block;
      transform: rotate(0deg);
      transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
    }

    .arrow-overlay {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 90px;
      top: -18%;
      z-index: 5;
      pointer-events: none;
    }

    .whirl-btn {
      width: 260px;
      max-width: 90%;
      cursor: pointer;
      margin: 6px auto 0;
      display: block;
    }

    .result {
      margin-top: 14px;
      font-size: 1rem;
      min-height: 3em;
      line-height: 1.4;
      color: #2A4C7F;
    }

    .bonus-law {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.75);
      border: 1px solid rgba(42, 76, 127, 0.15);
      font-size: 0.95rem;
      line-height: 1.35;
      color: #2A4C7F;
      text-align: left;
    }

    .bonus-law strong {
      display: block;
      margin-bottom: 6px;
      text-align: center;
    }

    .tagline {
      margin-top: 12px;
      font-size: 0.9rem;
      color: #7a6c5d;
    }
  </style>
</head>

<body>

  <div class="wrapper">

    <img
      src="https://www.billybobsparlour.com/wp-content/uploads/2025/12/game-header.png"
      alt="Billy Bob's Spin-O-Matic"
      class="game-header"
    >

    <div class="wheel-container">
      <img
        id="wheel"
        src="https://www.billybobsparlour.com/wp-content/uploads/2025/12/Wheel.png"
        alt="Spin Wheel"
      >
      <img
        class="arrow-overlay"
        src="https://www.billybobsparlour.com/wp-content/uploads/2025/12/Arrow.png"
        alt="Pointer"
      >
    </div>

    <img
      id="spinButton"
      src="https://www.billybobsparlour.com/wp-content/uploads/2025/12/Give-it-a-whirl.png"
      alt="Give it a whirl"
      class="whirl-btn"
    >

    <div id="result" class="result"></div>
    <div id="bonusLaw" class="bonus-law" style="display:none;"></div>

    <p class="tagline">Billy Bob's — tastes like happiness!</p>
  </div>

  <script>
    const wheel = document.getElementById("wheel");
    const spinButton = document.getElementById("spinButton");
    const resultDiv = document.getElementById("result");
    const bonusLawDiv = document.getElementById("bonusLaw");

    // Show a bonus law every other spin:
    const BONUS_LAW_EVERY_N_SPINS = 2;

    // ------------------ Law pool ------------------
    const crazyLaws = [
      {
        law: "In Alabama, it's illegal to walk around with an ice-cream cone in your back pocket.",
        reason: "WHY? Because sneaky people once used this trick to lure horses away without officially stealing them!"
      },
      {
        law: "In Arizona, it's illegal for a donkey to sleep in a bathtub.",
        reason: "WHY? A rancher’s donkey once floated away during a flood while snoozing in an old tub!"
      },
      {
        law: "In Louisiana, you're not allowed to tie an alligator to a fire hydrant.",
        reason: "WHY? Fire hydrants must NEVER be blocked by anything — vehicles, objects, or animals. Firefighters need instant access in emergencies."
      },
      {
        law: "In Maine, it’s against the law to step out of a plane while it’s flying.",
        reason: "WHY? Believe it or not, someone tried it — so lawmakers decided to make things crystal clear!"
      },
      {
        law: "In Alabama, it’s illegal to wear a fake moustache that causes laughter in church.",
        reason: "WHY? Church services were meant to be calm and respectful, and prank disguises were banned to stop disruptions."
      },
      {
        law: "If an elephant is tied to a parking meter, the parking fee must be paid.",
        reason: "WHY? Circuses brought elephants into town, and leaders decided anything taking up street space should follow parking rules."
      },
      {
        law: "In Baltimore, Maryland, it’s illegal to take a lion to the movies.",
        reason: "WHY? Some animals are simply too dangerous — and distracting — for public places like theaters."
      },
      {
        law: "In New Jersey, it’s illegal to slurp soup.",
        reason: "WHY? Slurping was considered very rude in public, and this law encouraged good table manners."
      },
      {
        law: "In Oklahoma, it’s illegal to take a bite out of someone else’s hamburger.",
        reason: "WHY? Because grabbing someone else’s food — even as a joke — counts as stealing."
      }
    ];

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // Law shuffle-bag (no repeats until used up, then refills)
    let lawBag = [];
    function refillLawBag() {
      lawBag = shuffle([...Array(crazyLaws.length).keys()]);
    }
    function nextLawIndex() {
      if (lawBag.length === 0) refillLawBag();
      return lawBag.pop();
    }
    function getNextLawHTML() {
      const item = crazyLaws[nextLawIndex()];
      return `${item.law}<br><em>${item.reason}</em>`;
    }

    // ------------------ Segments (8 games + 1 "law" slice) ------------------
    const segments = [
      {
        label: "Ice Cream Flavour Frenzy",
        text: "Take turns naming ice cream flavours — no repeats! First person to hesitate is out."
      },
      {
        label: "Pancake Toppings Dash",
        text: "In 15 seconds, how many pancake toppings can you name as a table? Quickfire round!"
      },
      {
        label: "Milkshake Tongue Twister",
        text: "Try saying this 3 times fast: ‘Milkshake makers mix mighty fast.’ Take turns!"
      },
      {
        label: "Hot Dog Tongue Twister",
        text: "Try saying this 3 times fast: ‘Hot dogs hop from grill to bun.’ Take turns!"
      },
      {
        label: "Burger Bite Tongue Twister",
        text: "Try saying this 3 times fast: ‘Billy Bob’s burgers in buns bite big.’ Take turns!"
      },
      {
        label: "Billy Bob’s Memory Game",
        text: "Start with: ‘I went to Billy Bob’s and I had…’ Each person repeats the list AND adds one new item."
      },
      {
        label: "States Showdown",
        text: "Take turns naming U.S. states — no repeats! How long can your table last?"
      },
      {
        label: "Guess the Food",
        text: "Someone secretly picks a Billy Bob’s food item. Everyone else asks yes/no questions until someone guesses it!"
      },
      {
        label: "Crazy U.S. Law!",
        text: () => getNextLawHTML()
      }
    ];

    const segmentCount = segments.length;
    const segmentAngle = 360 / segmentCount;

    // Segment shuffle-bag (no repeats until all 9 slices used, then refills)
    let segmentBag = [];
    function refillSegmentBag() {
      segmentBag = shuffle([...Array(segmentCount).keys()]);
    }
    function nextSegmentIndex() {
      if (segmentBag.length === 0) refillSegmentBag();
      return segmentBag.pop();
    }

    // Init bags
    refillSegmentBag();
    refillLawBag();

    // Spin state
    let isSpinning = false;
    let currentRotation = 0;
    let spinNumber = 0;

    function showBonusLawIfNeeded(landedOnLawSegment) {
      // Show laws every other spin, PLUS always show if they landed on the law slice.
      const shouldShowBecauseEveryOther = (spinNumber % BONUS_LAW_EVERY_N_SPINS === 0);
      const shouldShow = landedOnLawSegment || shouldShowBecauseEveryOther;

      if (!shouldShow) {
        bonusLawDiv.style.display = "none";
        bonusLawDiv.innerHTML = "";
        return;
      }

      // If the main segment already *is* a law, don't repeat the exact same law:
      // We’ll pull the next one for the bonus.
      const lawHTML = getNextLawHTML();

      bonusLawDiv.style.display = "block";
      bonusLawDiv.innerHTML = `<strong>Bonus Crazy Law!</strong>${lawHTML}`;
    }

    spinButton.addEventListener("click", () => {
      if (isSpinning) return;
      isSpinning = true;

      resultDiv.textContent = "";
      bonusLawDiv.style.display = "none";
      bonusLawDiv.innerHTML = "";

      spinNumber += 1;

      const chosenIndex = nextSegmentIndex();
      const fullTurns = 5;

      const chosenCenterAngle = chosenIndex * segmentAngle + segmentAngle / 2;
      const targetAngle = 360 - chosenCenterAngle;

      const base = currentRotation % 360;
      let diff = targetAngle - base;
      if (diff < 0) diff += 360;

      const stopAngle = currentRotation + fullTurns * 360 + diff;
      currentRotation = stopAngle;

      wheel.style.transition = "transform 4s cubic-bezier(0.25, 0.1, 0.25, 1)";
      wheel.style.transform = `rotate(${stopAngle}deg)`;

      wheel.addEventListener(
        "transitionend",
        () => {
          const seg = segments[chosenIndex];
          const resultText = typeof seg.text === "function" ? seg.text() : seg.text;

          resultDiv.innerHTML = `<strong>${seg.label}</strong><br>${resultText}`;

          const landedOnLawSegment = (seg.label === "Crazy U.S. Law!");
          showBonusLawIfNeeded(landedOnLawSegment);

          isSpinning = false;

          // Prevent rotation number growing huge over time
          setTimeout(() => {
            wheel.style.transition = "none";
            currentRotation = currentRotation % 360;
            wheel.style.transform = `rotate(${currentRotation}deg)`;
            void wheel.offsetWidth;
            wheel.style.transition = "transform 4s cubic-bezier(0.25, 0.1, 0.25, 1)";
          }, 50);
        },
        { once: true }
      );
    });
  </script>

</body>
</html>
